{"version":3,"sources":["../../../src/components/Main/Main.jsx"],"names":["Main","color","props","current","get","isDark","HR_COLOR","base","Absolute","overflow","backgroundColor","footerHr","borderTop","borderBottom","margin","currentScroll","overflowX","overflowY","scroll","dark","styles","elHeader","elFooter","elFooterHr","hr","header","footer","maxHeight","el","log","toJS","flex","Component","propTypes","instanceOf","Map","isRequired","defaultProps"],"mappings":"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","file":"Main.js","sourcesContent":["/* eslint max-len:0 */\r\n\r\nimport React from 'react';\r\nimport Radium from 'radium';\r\nimport Immutable from 'immutable';\r\nimport Color from 'color';\r\nimport { css, PropTypes, numberToGreyscale } from '../util';\r\nimport { Card, FlexEdge } from '../shared';\r\nimport Header from './Header';\r\nimport Footer from './Footer';\r\nimport ComponentHost from './ComponentHost';\r\nimport OutputLog from '../OutputLog';\r\n\r\n\r\n/**\r\n * The Main (center) pane that hosts the component.\r\n */\r\nclass Main extends React.Component {\r\n  static propTypes = {\r\n    current: PropTypes.instanceOf(Immutable.Map).isRequired,\r\n  };\r\n  static defaultProps = {};\r\n\r\n\r\n  backgroundColor() {\r\n    let color = this.props.current.get('backdrop') || '#fff';\r\n    color = numberToGreyscale(color);\r\n    return color;\r\n  }\r\n\r\n  styles(isDark) {\r\n    const HR_COLOR = isDark\r\n        ? 'rgba(255, 255, 255, 0.4)'\r\n        : 'rgba(0, 0, 0, 0.1)';\r\n\r\n    return css({\r\n      base: {\r\n        Absolute: 0,\r\n        overflow: 'hidden',\r\n        backgroundColor: this.backgroundColor(),\r\n      },\r\n      footerHr: {\r\n        borderTop: `solid 8px ${ HR_COLOR }`,\r\n        borderBottom: 'none',\r\n        margin: '0 20px',\r\n      },\r\n    });\r\n  }\r\n\r\n\r\n  scroll() {\r\n    const { current } = this.props;\r\n    const currentScroll = current.get('scroll');\r\n    const overflowX = (currentScroll === true || currentScroll === 'x' || currentScroll === 'x:y') ? 'auto' : 'hidden';\r\n    const overflowY = (currentScroll === true || currentScroll === 'y' || currentScroll === 'x:y') ? 'auto' : 'hidden';\r\n    return { scroll: currentScroll, overflowX, overflowY };\r\n  }\r\n\r\n\r\n  render() {\r\n    const { current } = this.props;\r\n    const { overflowX, overflowY } = this.scroll();\r\n    const isDark = Color(this.backgroundColor()).dark();\r\n    const styles = this.styles(isDark);\r\n\r\n    let elHeader;\r\n    let elFooter;\r\n    let elFooterHr;\r\n    const hr = current.get('hr');\r\n\r\n    // Header.\r\n    const header = current.get('header');\r\n    if (header) {\r\n      elHeader = (<Header\r\n        markdown={ header }\r\n        edge=\"top\"\r\n        hr={ hr }\r\n        isDark={ isDark } />);\r\n    }\r\n\r\n    // Footer.\r\n    const footer = current.get('footer');\r\n    if (footer) {\r\n      elFooterHr = <hr style={ styles.footerHr } />;\r\n      elFooter = (<Footer\r\n        markdown={ footer }\r\n        isDark={ isDark }\r\n        flexEdge={ { maxHeight: '50%', overflowY: 'auto' } } />);\r\n    }\r\n\r\n    // Main content.\r\n    let el = <ComponentHost current={ current } />;\r\n\r\n    // Swap out the main host with the log if required.\r\n    const log = current.get('log');\r\n    el = current.get('showLog') && log\r\n            ? el = <OutputLog items={ log.toJS() } />\r\n            : el;\r\n\r\n    return (\r\n      <Card>\r\n        <div style={ styles.base }>\r\n          <FlexEdge orientation=\"vertical\">\r\n            { elHeader }\r\n            <div data-flexEdge={ { flex: 1, overflowX, overflowY } }>{ el }</div>\r\n            { elFooterHr }\r\n            { elFooter }\r\n          </FlexEdge>\r\n        </div>\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default Radium(Main);\r\n"]}