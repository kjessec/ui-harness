{"version":3,"sources":["../../src/shared/util.js"],"names":["util","escapeHtml","text","isWithinBlock","result","char","formatText","isBlank","toString","substring","length"],"mappings":";;;;;;;AAAA;;IAAYA,I;;AACZ;;;;;;;;AAGA;;;AAGO,IAAMC,kCAAa,SAAbA,UAAa,CAACC,IAAD,EAAU;AAClC,MAAIC,gBAAgB,KAApB;AACA,MAAIC,SAAS,EAAb;AAFkC;AAAA;AAAA;;AAAA;AAGlC,yBAAiBF,IAAjB,8HAAuB;AAAA,UAAdG,IAAc;;AACrB;AACA,UAAIA,SAAS,GAAb,EAAkB;AAAEF,wBAAgB,CAACA,aAAjB;AAAiC;AACrD,UAAI,CAACA,aAAL,EAAoB;AAClB,YAAIE,SAAS,GAAb,EAAkB;AAAEA,iBAAO,MAAP;AAAgB;AACpC,YAAIA,SAAS,GAAb,EAAkB;AAAEA,iBAAO,MAAP;AAAgB;AACrC;AACDD,gBAAUC,IAAV;AACD;AAXiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAYlC,SAAOD,MAAP;AACD,CAbM;;AAiBP;;;;;AAKO,IAAME,kCAAa,SAAbA,UAAa,CAACJ,IAAD,EAAU;AAClC,MAAIF,KAAKO,OAAL,CAAaL,IAAb,CAAJ,EAAwB;AAAE,WAAOA,IAAP;AAAc;AACxCA,SAAOA,KAAKM,QAAL,EAAP;AACAN,SAAOD,WAAWC,IAAX,CAAP;AACAA,SAAO,sBAAOA,IAAP,CAAP;AACAA,SAAOA,KAAKO,SAAL,CAAe,CAAf,EAAkBP,KAAKQ,MAAL,GAAc,CAAhC,CAAP,CALkC,CAKS;AAC3C,SAAOR,IAAP;AACD,CAPM","file":"util.js","sourcesContent":["import * as util from 'js-util';\r\nimport marked from 'marked';\r\n\r\n\r\n/**\r\n * Converts HTML chars into escaped versions.\r\n */\r\nexport const escapeHtml = (text) => {\r\n  let isWithinBlock = false;\r\n  let result = '';\r\n  for (let char of text) {\r\n    // Don't escape <HTML> that is wihtin the markdown `tick` block.\r\n    if (char === '`') { isWithinBlock = !isWithinBlock; }\r\n    if (!isWithinBlock) {\r\n      if (char === '<') { char = '&lt;'; }\r\n      if (char === '>') { char = '&gt;'; }\r\n    }\r\n    result += char;\r\n  }\r\n  return result;\r\n};\r\n\r\n\r\n\r\n/**\r\n * Formats text for display.\r\n * @param {string} text: The text for format.\r\n * @return {string} HTML.\r\n */\r\nexport const formatText = (text) => {\r\n  if (util.isBlank(text)) { return text; }\r\n  text = text.toString();\r\n  text = escapeHtml(text);\r\n  text = marked(text);\r\n  text = text.substring(3, text.length - 5); // Remove the wrapping <p>...</p> tags.\r\n  return text;\r\n};\r\n"]}